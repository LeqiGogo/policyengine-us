- name: Separate ineligible
  period: 2022
  input:
    people:
      person1:
        id_retirement_benefits_deduction_eligible_person: true
        social_security_retirement: 10_000
        taxable_pension_income: 30_000
        military_retirement_pay: 15_000
      person2:
        id_retirement_benefits_deduction_eligible_person: false
    tax_units:
      tax_unit:
        members: [person1, person2]
        filing_status: SEPARATE 
    households:
      household:
        members: [person1, person2]
        state_code: ID
  output:
    id_retirement_benefits_deduction: 0

- name: Idaho retirement benefits unit test 2 - single
  period: 2022
  input:
    people:
      person1:
        id_retirement_benefits_deduction_eligible_person: false
        social_security_retirement: 45_000
        taxable_pension_income: 38_700
        military_retirement_pay: 0
    tax_units:
      tax_unit:
        members: [person1]
        filing_status: SINGLE
    households:
      household:
        members: [person1]
        state_code: ID
  output:
    id_retirement_benefits_deduction: 0

- name: Idaho retirement benefits unit test 3 - single not eligible
  period: 2022
  input:
    people:
      person1:
        id_retirement_benefits_deduction_eligible_person: false
        social_security_retirement: 45_000
        taxable_pension_income: 38_700
        military_retirement_pay: 0
    tax_units:
      tax_unit:
        members: [person1]
        filing_status: SINGLE
    households:
      household:
        members: [person1]
        state_code: ID
  output:
    id_retirement_benefits_deduction: 0

- name: Idaho retirement benefits unit test 4 - married filling jointly not eligible
  period: 2022
  input:
    people:
      person1:
        id_retirement_benefits_deduction_eligible_person: false
        social_security_retirement: 10_000
        taxable_pension_income: 30_000
        military_retirement_pay: 15_000
      person2:
        is_tax_unit_spouse: false
      person3:
        is_tax_unit_dependent: false
    tax_units:
      tax_unit:
        members: [person1, person2, person3]
        filing_status: JOINT 
    households:
      household:
        members: [person1, person2, person3]
        state_code: ID
  output:
    id_retirement_benefits_deduction: 0

- name: Idaho retirement benefits unit test 5 - widow
  period: 2022
  input:
    people:
      person1:
        id_retirement_benefits_deduction_eligible_person: true
        social_security_retirement: 10_000
        taxable_pension_income: 30_000
        military_retirement_pay: 0
      person2:
        id_retirement_benefits_deduction_eligible_person: false
    tax_units:
      tax_unit:
        members: [person1, person2]
        filing_status: WIDOW 
    households:
      household:
        members: [person1, person2]
        state_code: ID
  output:
    id_retirement_benefits_deduction: 30_000

- name: Joint eligible with social security retirement and pension income
  period: 2022
  input:
    people:
      person1:
        id_retirement_benefits_deduction_eligible_person: true
        social_security_retirement: 10_000
        taxable_pension_income: 30_000
        military_retirement_pay: 15_000
      person2:
        id_retirement_benefits_deduction_eligible_person: false
    tax_units:
      tax_unit:
        members: [person1, person2]
        filing_status: JOINT 
    households:
      household:
        members: [person1, person2]
        state_code: ID
  output:
    id_retirement_benefits_deduction: 45_000

- name: Joint eligible with social security retirement and pension income - both eligible 
  period: 2022
  input:
    people:
      person1:
        id_retirement_benefits_deduction_eligible_person: true
        social_security_retirement: 5_000
        taxable_pension_income: 30_000
        military_retirement_pay: 15_000
      person2:
        id_retirement_benefits_deduction_eligible_person: true
        social_security_retirement: 5_000
        taxable_pension_income: 0
        military_retirement_pay: 0
    tax_units:
      tax_unit:
        members: [person1, person2]
        filing_status: JOINT 
    households:
      household:
        members: [person1, person2]
        state_code: ID
  output:
    id_retirement_benefits_deduction: 45_000

- name: Joint eligible with capped benefit - both eligible 
  period: 2022
  input:
    people:
      person1:
        id_retirement_benefits_deduction_eligible_person: true
        social_security_retirement: 5_000
        taxable_pension_income: 30_000
        military_retirement_pay: 15_000
      person2:
        id_retirement_benefits_deduction_eligible_person: true
        social_security_retirement: 5_000
        taxable_pension_income: 10_000
        military_retirement_pay: 10_000
    tax_units:
      tax_unit:
        members: [person1, person2]
        filing_status: JOINT 
    households:
      household:
        members: [person1, person2]
        state_code: ID
  output:
    id_retirement_benefits_deduction: 50_210
